---
title: "動くけど不安...を解決 ── AIダブルチェックで品質を担保するレビュースキル"
emoji: "🔍"
type: "tech"
topics: ["GoogleAntigravity", "Codex", "個人開発", "非エンジニア", "コードレビュー"]
published: false
---

## はじめに

AIに作ってもらったコードが動いた。嬉しい。

でも、不安が残る。

---

「動いてるけど、これで大丈夫なの？」

エンジニアの友人に見せたら、「エラー処理がない」と言われた。

...エラー処理って何？

---

「APIキーが丸見えだよ」

...API...キー...？（何のことかわからない）

---

非エンジニアの個人開発で三番目につらいのは、**「動いてるけど本当に大丈夫かわからない」**こと。

本記事では、**AIにコードをチェックしてもらって、問題点を教えてもらうスキル**の詳細を解説する。

:::message
本記事は「非エンジニアのためのAIチーム開発」シリーズの詳細編。
- 全体像: [「AIへの指示が難しい」を解決する](antigravity-noneng-workflow-overview)
- 前回: [設計スキル](antigravity-design-skill)
- 次回: [ドキュメントスキル](antigravity-documentation-skill)
:::

## 前提条件

- Google Antigravity インストール済み
  - まだの場合 → [Antigravityインストールガイド](antigravity-windows-install-guide)
- Codex CLI インストール済み（オプション）
  - まだの場合 → [デュアルAI開発環境の構築記事](antigravity-codex-dual-agent-guide)
- プログラミング経験は不要

:::message
Codex CLIがなくても、Antigravityの機能だけでレビューは実行できる。
ただし、**セキュリティチェックにはCodex連携を強く推奨**する（理由は後述）。
:::

## 解決策：レビュースキル

### コンセプト

**「レビューして」と言うだけで、AIがコードの問題点を教えてくれる。**

```
ユーザー: レビューして

AI: コードをチェックしました。

    🔴 重要: invoice.gs 42行目
       エラーが起きた時の処理がありません。
       → 修正すると、エラーが起きても止まらなくなります。

    🔴 重要: main.gs 5行目
       APIキーが直接書かれています。
       → 他の人に見られると危険です。

    修正しますか？

ユーザー: はい

AI: 修正しました！
```

**問題点を「非エンジニアにもわかる言葉で」教えてくれる。**

## なぜCodex連携が重要なのか（ダブルチェック）

「Antigravityだけでもレビューできるのに、なぜCodexも使うの？」

**答え: 同じAIが作ったコードを、同じAIがチェックしても見落としがある。**

| 方式 | 問題 |
|------|------|
| Antigravityだけ | 自分が書いたコードの問題に気づきにくい（人間と同じ） |
| Codex連携 | 別のAIが客観的にチェック → 見落としを減らせる |

### Codexのセキュリティレビューが強い理由

Codexは**セキュリティチェックに特化した訓練**を受けている。

| Codexの強み | 具体例 |
|-------------|--------|
| 専用の `/review` コマンド | 優先順位付きで問題を報告 |
| PR全体を理解した上でレビュー | 変更の意図と実装のズレを検出 |
| 必要に応じてコードを実行して検証 | 静的解析では見つからない問題も発見 |

> Codex understands PR intent, compares it to the changes, and runs code when needed to deliver deeper, more accurate reviews than static analysis.
> — [OpenAI公式: Introducing upgrades to Codex](https://openai.com/index/introducing-upgrades-to-codex/)

OpenAI社内でも、Codexは**PRの大半をレビュー**しており、毎日数百の問題を人間のレビュー前に発見しているとのこと。

> At OpenAI, Codex now reviews the vast majority of our PRs, catching hundreds of issues every day—often before a human review begins.
> — [OpenAI公式: Introducing upgrades to Codex](https://openai.com/index/introducing-upgrades-to-codex/)

:::message alert
**特に以下のケースではCodex連携を強く推奨**:
- APIキーやパスワードを扱うコード
- ユーザーの入力を受け付けるコード
- 外部と通信するコード
:::

### Antigravity + Codex のダブルチェック体制

```
Antigravityで実装
    ↓
Antigravityで一次レビュー（基本的なチェック）
    ↓
Codexで二次レビュー（セキュリティ重点）
    ↓
問題を修正
```

**人間のチーム開発でも「作った人と別の人がレビュー」するのと同じ。**

### レビュー観点

6つの観点から選べる。非エンジニアは「F. すべてチェック」がおすすめ。

| 観点 | 内容 | 非エンジニア向け説明 |
|------|------|---------------------|
| A. バグ・エラー | 動かない可能性 | 「動くけど、たまに止まる」を防ぐ |
| B. セキュリティ | 危険な箇所 | 「パスワードが見えてる」を防ぐ |
| C. パフォーマンス | 遅くなる箇所 | 「なんか遅い」を防ぐ |
| D. 読みやすさ | わかりにくい箇所 | 後で見返した時に困らない |
| E. 設計との一致 | 設計書と合っているか | 最初に決めたことと違ってないか |
| F. すべて | 上記すべて | **迷ったらこれ** |

### 指摘の重要度

指摘は3段階でわかりやすく表示される。

| 重要度 | 意味 | どうする？ |
|--------|------|-----------|
| 🔴 高 | 危険。止まる可能性あり | すぐ直す |
| 🟡 中 | 動くけど問題あり | 直した方がいい |
| 🟢 低 | より良くできる | 余裕があれば |

## 実装方法

### Antigravityに指示を出す

```
skills/review/SKILL.md を作成してください。
フォルダがなければ作成してください。

【解決したい悩み】
非エンジニアの個人開発で、
1. 動いてるけど本当に大丈夫かわからない
2. エンジニアに「エラー処理がない」と言われても意味がわからない

【確認フロー（この順序を必ず守ること）】
Step 0: 対象ファイルの確認（必須・最初に行う）
Step 1: レビュー観点の選択
    A. バグ・エラー（動かなくなる可能性）
    B. セキュリティ（危険な箇所）
    C. パフォーマンス（遅くなる箇所）
    D. 読みやすさ（わかりにくい箇所）
    E. 設計との一致（最初に決めたことと合ってるか）
    F. すべてチェック ← 非エンジニアにおすすめ

【必須機能】
- 「レビューして」と言うとスキルが起動
- 指摘を重要度（高🔴/中🟡/低🟢）で分類
- 指摘の理由を非エンジニアにもわかる言葉で説明
- 良かった点も必ず報告する
- 「修正しますか？」と確認
- 承認された修正を自動で適用
- 結果を docs/REVIEW.md に保存

【制約事項】
- 確認の省略禁止: Step 0, Step 1 は必ず実行すること
- 順序変更禁止: 必ず Step 0 → Step 1 → 実行 → 確認 の順で実行
- 非エンジニア向け説明必須: すべての指摘に平易な言葉での説明を付ける
```

## デモ：実際の対話フロー

```
レビューして
```

**Step 1: 対象ファイルの確認**

```
AI: レビューを開始します。

対象ファイル:
- src/main.gs
- src/invoice.gs
- src/pdf.gs

すべてチェックしますか？

ユーザー: はい
```

**Step 2: レビュー実行**

```
AI: レビュー中...

完了しました。
```

**Step 3: 結果報告（非エンジニア向け説明付き）**

```
AI: ## レビュー結果

### 🔴 重要（すぐ直すべき）

**1. invoice.gs 42行目**
エラーが起きた時の処理がありません。

何が問題？
→ 今は動いていますが、たまにエラーが起きると止まってしまいます。

どう直す？
→ 「エラーが起きたら〇〇する」という処理を追加します。

---

**2. main.gs 5行目**
APIキーが直接書かれています。

何が問題？
→ このコードを誰かに見せると、あなたのAPIキーが見えてしまいます。
  悪用される可能性があります。

どう直す？
→ APIキーを別の場所に保存して、コードからは見えないようにします。

---

### 🟡 注意（直した方がいい）

**3. main.gs 28行目**
入力値のチェックがありません。

何が問題？
→ 変なデータが入力されると、おかしな動きをする可能性があります。

---

修正しますか？

A. 🔴 重要をすべて修正
B. 1つずつ確認して修正
C. 後で対応する

ユーザー: A
```

**Step 4: 修正適用**

```
AI: 🔴 重要の指摘を修正します。

【修正1】src/invoice.gs 42行目

修正前: エラー処理なし
修正後: エラーが起きたらログを残して続行

適用しました ✅

【修正2】src/main.gs 5行目

修正前: APIキーが直接書かれている
修正後: PropertiesService（安全な場所）に移動

適用しました ✅

---

レビュー結果を docs/REVIEW.md に保存しました。
```

## 非エンジニアの個人開発でよく見つかる問題

| よくある問題 | 意味 | 放置すると |
|-------------|------|-----------|
| エラー処理がない | エラーが起きた時の対応がない | たまに止まる |
| APIキーが丸見え | パスワードみたいなものが見えてる | 悪用される |
| 入力チェックがない | 変なデータを受け入れてしまう | おかしな動きをする |

**これらを自分で気づくのは難しい。だからAIにチェックしてもらう。**

## つまずきポイント

### 1. 指摘の意味がわからない

**問題**: 「エラーハンドリングが必要」と言われても意味がわからない。

**解決策**: このスキルでは「非エンジニアにもわかる言葉で」説明するように設定している。

### 2. 修正したら動かなくなった

**問題**: AIの修正を適用したら、別の場所でエラーが出た。

**解決策**: 「1つずつ確認して修正」を選び、1つ修正するたびに動作確認する。

## まとめ

- **非エンジニアでもコードレビューできる** — AIが問題点を教えてくれる
- 指摘は「非エンジニアにもわかる言葉で」説明される
- 重要度（🔴🟡🟢）で優先順位がわかる
- 修正も自動で適用してくれる

**次は「ドキュメントスキル」で、上司への報告資料を自動生成する。**

---

## シリーズリンク

| # | 記事 | 内容 |
|---|------|------|
| 0 | [全体像](antigravity-noneng-workflow-overview) | ワークフローで一気通貫開発 |
| 1 | [要件定義スキル](antigravity-requirements-skill) | 5つの質問で要件を引き出す |
| 2 | [設計スキル](antigravity-design-skill) | AIが選択肢を出してくれる |
| 3 | **レビュースキル**（本記事） | AIダブルチェックで品質担保 |
| 4 | [ドキュメントスキル](antigravity-documentation-skill) | 上司報告資料まで自動生成 |
| 5 | [振り返りスキル](antigravity-retrospective-skill) | 良かった点・問題点・次やることを整理 |
| 6 | [学びの継承スキル](antigravity-insights-skill) | 過去の学びを自動で次に活かす（発展編） |
