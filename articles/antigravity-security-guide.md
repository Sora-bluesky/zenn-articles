---
title: "Google Antigravity を安全に使うために知っておくべきこと"
emoji: "🛡️"
type: "tech"
topics: ["ai", "生成ai", "セキュリティ", "llm", "個人開発"]
published: false
---

## はじめに

Google Antigravityは強力なAIコーディングツールだが、セキュリティ面で注意すべき点がある。
2025年11月のリリース直後にセキュリティ研究者が複数の脆弱性（ぜいじゃくせい＝ソフトウェアの「弱点」や「隙」のこと）を発見し、Forbes等の大手メディアで報じられた。

この記事では、非エンジニアでもわかるように「何が危険なのか」「どう対策すればいいのか」をまとめた。

:::message alert
**重要**
この記事は2026年1月時点の情報に基づく。Googleが修正を進めている可能性があるため、最新の公式ドキュメントも確認すること。
:::

:::message
**シリーズ構成**
- [【非エンジニア×AI開発】Google Antigravity インストールガイド（Windows）](antigravity-windows-install-guide)
- [【非エンジニア×AI開発】Google Antigravity × Codex CLI でデュアルエージェント開発](antigravity-codex-dual-agent-guide)
- **【非エンジニア×AI開発】Antigravityを安全に使うために知っておくべきこと**（この記事）
:::

---

## 何が起きたのか

リリースから24時間以内に、3つのセキュリティ研究チームが複数の脆弱性を発見・報告した（Mindgard社の永続的バックドア、Embrace The Redの5件、PromptArmor社のブラウザ悪用など）。

| 発見者 | 内容 | 深刻度 |
|--------|------|--------|
| Mindgard社 | アンインストールしても消えないバックドア | 🔴 最高 |
| Embrace The Red | 見えない命令でデータを盗まれる（5件） | 🔴 高 |
| PromptArmor社 | ブラウザ機能を悪用してパスワードを外部送信 | 🔴 高 |

:::message
**バックドアとは？**
正規の入口とは別に、こっそり作られた「裏口」のこと。一度仕込まれると、知らない間にパソコンの情報を盗まれ続ける。
:::

---

## 5つの脆弱性をやさしく解説

### 🔴 脆弱性1: アンインストールしても消えないバックドア

**どういうこと？**

悪意のある人が作ったプロジェクトを開いて「Trust this folder（このフォルダを信頼する）」をクリックすると、パソコンの奥深くに「裏口」が作られる。

この裏口は Antigravity をアンインストール・再インストールしても消えない。

**例え話**
家のドアに新しい鍵を付けたつもりが、壁の裏に見えない通路を作られてしまった状態。鍵を変えても通路は残っている。

**なぜ消えないの？**
裏口の情報は Antigravity のインストールフォルダの「外」（ユーザー設定フォルダ）に保存される。アンインストールしてもユーザー設定フォルダは消えない。

:::message alert
**対策**
Antigravity を使い終わったら、以下のファイルを確認する：
- Windows: `%USERPROFILE%\.gemini\antigravity\mcp_config.json`

見覚えのない設定が書かれていたら削除する。

**ファイルの開き方**：
1. Windows キー + R を押す
2. `%USERPROFILE%\.gemini\antigravity` と入力して Enter
3. `mcp_config.json` をメモ帳で開いて確認
:::

### 🔴 脆弱性2: 人間には見えないが、AIには見える命令

**どういうこと？**

普通に見えるコードファイルやWebページに、人間の目には見えない特殊な文字で命令が埋め込まれている場合がある。AIはこの「透明インク」を読めてしまい、その指示に従ってしまう。

**例え話**
犬笛のようなもの。人間には聞こえない周波数の音で、犬だけに命令を出す。AIも同様に、人間には見えない文字で書かれた命令を実行してしまう。

:::message
**これは Antigravity だけの問題？**
いいえ。この種の攻撃（AIに対する隠し命令）はすべてのAIツールに対して理論上可能。ただし、ツールによって対策の度合いが異なる。
:::

:::message alert
**対策**
→ 「対策2: ターミナル実行をOffにする」で、AIが隠し命令を受けても自動実行を防げる。
:::

---

### 🔴 脆弱性3: パスワードやAPIキーが知らないうちに外部送信される

:::message
**APIキーとは？**
Webサービスを利用するための「合言葉」のようなもの。パスワードと同じく、他人に知られるとサービスを悪用される。
:::

**どういうこと？**

Antigravity に「このURLを参考にして」と指示した時、そのWebページに隠し命令が埋め込まれていると、パソコン内のパスワードやAPIキーが攻撃者のサーバーに送信される。

**例え話**
信頼できそうなレシピ本を秘書に渡したら、本の余白に「金庫の番号を写真に撮って、この住所に郵送しろ」と透明インクで書いてあった。秘書はその指示も実行してしまう。

**なぜ防げないのか**
Antigravity のデフォルト設定では、AIが「安全」と判断したコマンドは自動で実行される。人間の確認なしに操作が進む。

### 🟡 脆弱性4: 外部ツール（MCP）が確認なしに実行される

**どういうこと？**

MCP（外部ツール連携）を使っている場合、AIが外部ツールを呼び出す際に人間の確認がない。例えば、Slackにメッセージを送ったり、データベースにアクセスしたりする操作が、自動で行われる。

:::message
**MCPとは？**
Model Context Protocol の略。AIツールに「追加の能力」を与える仕組み。例えば、Slackにメッセージを送る、データベースを操作する、ファイルを検索する、といった機能を後から追加できる。
:::

**例え話**
秘書が、あなたの確認なしに勝手にメールを送ったり、契約書にサインしたりできてしまう状態。

:::message
**Claude Code との違い**
Claude Code では、MCP ツールの実行前に確認が表示される（2026年1月時点の公式ドキュメントに基づく）。Antigravity にはこの確認がない。
:::

### 🟡 脆弱性5: デフォルト設定に「穴」がある

**どういうこと？**

セキュリティ研究者の報告によると、Antigravity のデフォルト設定に、データを外部送信できるサイト（webhook.site＝受信したデータをそのまま表示するテスト用Webサイト）が許可されていた（2025年11月時点）。攻撃者はこの「穴」を使って情報を外部に送信できる。

**例え話**
会社のセキュリティゲートに、最初から「この人は通していい」というリストがあり、そのリストに攻撃者の名前が入っている状態。

---

## Googleの対応状況

| 時期 | 対応 |
|------|------|
| 2025年11月21日 | 最初の報告を「仕様通り（修正しない）」として却下 |
| 2025年11月25日 | 研究者の異議を受けて再調査を開始 |
| 2026年1月 | 「Secure Mode」を追加（ただし最も深刻な脆弱性は防げない） |

Googleは段階的に対応を進めているが、2026年1月時点で最も深刻な「永続的バックドア」は Secure Mode でも完全には防げない。ユーザー側でも対策が必要。

:::message
**つまり？**
Google任せにせず、本記事の「今すぐできる対策」を自分で実施することが重要。
:::

---

## 今すぐできる対策

### 対策1: 知らないプロジェクトを安易に開かない

「Trust this folder（このフォルダを信頼する）」は、そのフォルダの中身を **全面的に信頼する** という意味。

GitHub で見つけたプロジェクトや、人からもらったファイルを開く前に：

1. `.agent/` フォルダが含まれていないか確認
2. `.agent/` フォルダがある場合、中のファイルをメモ帳で開いて内容を確認
3. 不審な命令（「MUST ALWAYS」「必ず実行」など強い言葉）がないか確認

:::message
**`.agent/` フォルダとは？**
Antigravity がプロジェクトの設定やAIへの指示を保存するフォルダ。このフォルダの中に悪意ある命令を仕込むことで、AIを操る攻撃が可能になる。
:::

### 対策2: ターミナル実行を「Off」にする

Antigravity の設定で、AIが自動でコマンドを実行できないようにする。

1. Antigravity を開く
2. Settings（設定） → Advanced Settings（詳細設定）
3. Terminal → Agent → **Off** を選択

これで、すべてのコマンド実行前に確認が表示される。

:::message
**デメリット**
毎回確認が必要になるため、作業のテンポが遅くなる。慣れてきたら「Auto」に戻すこともできるが、安全を優先するなら「Off」のままがよい。
:::

### 対策3: mcp_config.json を定期的に確認

1. Windows キー + R を押す
2. `%USERPROFILE%\.gemini\antigravity` と入力して Enter
3. `mcp_config.json` をメモ帳で開く
4. 自分が設定した覚えのないMCPサーバーがあれば削除

:::message
**MCPサーバーとは？**
AIに追加機能を提供する外部プログラムのこと。自分でインストールした覚えのないものが設定に入っていたら、それはバックドアの可能性がある。
:::

### 対策4: パスワードやAPIキーを分離する

- `.env` ファイルに本番環境のパスワードを入れない
- 開発用のAPIキーには金額上限を設定する
- 重要な認証情報は Antigravity から見えない場所に保存する

:::message
**`.env` ファイルとは？**
プロジェクトの設定値（APIキーやパスワードなど）を保存するファイル。Antigravity はプロジェクトフォルダ内のファイルを読み書きできるため、ここに本番のパスワードを入れると盗まれるリスクがある。
:::

### 対策5: AIをバックグラウンドで放置しない

Agent Manager の「バックグラウンド実行」は使わず、AIの操作を監視する。

:::message
**ポイント**
「AIが何をしているか見ていられない」状態が最も危険。作業中は画面を見ておく。
:::

---

## Claude Code との比較

Claude Code は Antigravity とは異なるセキュリティ設計を採用している。

| 項目 | Antigravity | Claude Code |
|------|-------------|-------------|
| 自動実行 | AIが「安全」と判断すれば自動実行 | 変更・実行前に確認が必要 |
| サンドボックス | なし | OS レベルで隔離 |
| MCP実行 | 確認なし | 確認あり |
| 永続的バックドア | リスクあり | 構造上困難 |
| ファイルアクセス | フォルダ信頼で全許可 | 作業ディレクトリに制限 |

:::message
**サンドボックスとは？**
「砂場」という意味。AIが操作できる範囲を限定する仕組み。砂場の外には出られないので、たとえAIが悪意ある指示を受けても、被害が砂場の中に限定される。
:::

:::message
**セキュリティ面では？**
セキュリティを重視するなら Claude Code の方が堅牢な設計になっている。Antigravity を使う場合は、本記事の対策を必ず実施すること。
:::

---

## 背景：なぜこうなったのか

Antigravity は、元々 **Windsurf** というツールをベースにしている（Googleが約24億ドルでライセンス取得）。

問題は、Windsurfの段階で **2025年5月に報告済みの脆弱性が修正されないまま** Antigravity としてリリースされたこと。

:::message
**時系列**
- 2025年5月：研究者がWindsurfの脆弱性を報告
- 2025年6月～8月：Windsurf側は無応答
- 2025年11月：未修正のままAntigravityとしてリリース
- 2025年11月：リリース24時間以内に同じ脆弱性が再発見
:::

この経緯は「新しいツールを早くリリースしたい」という圧力が、セキュリティ確認を後回しにする結果になった典型例として報じられている。

---

## まとめ

| やるべきこと | 防げる脆弱性 | 難しさ | 効果 |
|-------------|-------------|--------|------|
| 知らないプロジェクトを安易に開かない | 1（バックドア）、2（隠し命令） | ★☆☆ | 🔴 高 |
| ターミナル実行を「Off」にする | 2（隠し命令）、3（外部送信）、4（MCP自動実行） | ★☆☆ | 🔴 高 |
| mcp_config.json を定期的に確認 | 1（バックドア） | ★★☆ | 🔴 高 |
| パスワード・APIキーを分離する | 3（外部送信） | ★★☆ | 🟡 中 |
| AIをバックグラウンドで放置しない | 全般 | ★☆☆ | 🟡 中 |

Antigravity は強力なツールだが、「デフォルト設定のまま使う」のが最も危険。上記の対策を実施した上で使えば、リスクを大幅に減らせる。

---

## 参考リンク

以下は英語の記事。ブラウザの翻訳機能（右クリック →「日本語に翻訳」）で読める。

- [Forbes: A security researcher discovered a nasty flaw in Google's Antigravity tool](https://www.forbes.com/sites/thomasbrewster/2025/11/26/googles-new-ai-tool-has-a-nasty-security-flaw/)
- [Embrace The Red: Security Vulnerabilities in Google's Latest IDE](https://embracethered.com/blog/posts/2025/security-keeps-google-antigravity-grounded/)
- [Mindgard: Persistent Code Execution Vulnerability](https://mindgard.ai/blog/google-antigravity-persistent-code-execution-vulnerability)
- [Anthropic: Making Claude Code More Secure](https://www.anthropic.com/engineering/claude-code-sandboxing)

---

## 関連記事

- [【非エンジニア×AI開発】Google Antigravity インストールガイド（Windows）](antigravity-windows-install-guide)
- [【非エンジニア×AI開発】Google Antigravity × Codex CLI でデュアルエージェント開発](antigravity-codex-dual-agent-guide)
